{% extends 'base.html' %}
{% load static %}
{% block title %} | Compte professeur{% endblock %}

{% block content %}

<!-- Teacher Profile Creation Section -->
<div class="teacher-profile-creation">
    <div class="row justify-content-center g-0">
        <!-- Sidebar Column -->
        <div class="col-sm-12 col-md-4 col-lg-2 sidebar-col">
            {% include 'partials/_sidebar.html' %}
        </div>
        
        <!-- Main Content Column -->
        <div class="col-sm-12 col-md-8 col-lg-10 main-content-col px-5">
            <!-- Profile Creation Form -->
            <form method="POST" enctype="multipart/form-data" action="{% url 'nouveau_description' %}" class="profile-form">
                {% csrf_token %}
                
                <!-- Section Header -->
                <div class="form-header-section">
                    <div class="container">
                        <div class="text-center py-4">
                            <h3 class="section-subtitle text-primary">Complétez votre profil</h3>
                            <h1 class="section-title">Un titre à votre fiche et autres détails</h1>
                            {% include 'partials/_alerts.html' %}
                        </div>
                    </div>
                </div>

                <!-- Profile Title Section -->
                <section class="profile-section" id="intitulez_Votre_fiche">
                    <div class="container">
                        <div class="form-card">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="titre_id" class="form-label">Titre de votre fiche*</label>
                                    <input type="text" class="form-control" id="titre_id" required name="titre" value="{{titre}}" placeholder="Ex: Professeur de mathématiques expérimenté à Paris">
                                </div>
                                
                                <div class="col-12 form-guidance">
                                    <p class="guidance-text">
                                        Optimisez l'impact de votre profil en le rendant attrayant pour les parents. 
                                        Mentionnez les matières enseignées, votre localisation, le format des cours, 
                                        votre expérience et vos diplômes.
                                    </p>
                                    
                                    <!-- Guidance Modal Trigger -->
                                    <button type="button" class="btn btn-outline-primary guidance-btn" data-bs-toggle="modal" data-bs-target="#titleGuidanceModal">
                                        <i class="fas fa-info-circle me-2"></i>Conseils pour votre titre
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation Buttons -->
                        <div class="form-navigation">
                            <div class="row justify-content-end g-3">
                                <div class="col-auto">
                                    <a href="#parcours" class="btn btn-primary next-btn">
                                        Suivant <i class="fas fa-arrow-right ms-2"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Education Background Section -->
                <section class="profile-section" id="parcours">
                    <div class="container">
                        <div class="section-header text-center">
                            <h6 class="section-subtitle text-primary">Votre parcours académique</h6>
                            <h1 class="section-title">Détaillez votre formation</h1>
                        </div>
                        
                        <div class="form-card">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="parcours_id" class="form-label">Description de votre parcours*</label>
                                    <textarea class="form-control auto-resize" id="parcours_id" rows="4" name="parcours">{{parcours}}</textarea>
                                </div>
                                
                                <div class="col-12 form-guidance">
                                    <div class="guidance-points">
                                        <div class="guidance-point">
                                            <i class="fas fa-graduation-cap text-primary me-2"></i>
                                            <span>Mentionnez vos diplômes et les institutions où vous les avez obtenus</span>
                                        </div>
                                        <div class="guidance-point">
                                            <i class="fas fa-book-open text-primary me-2"></i>
                                            <span>Décrivez vos spécialisations et filières étudiées</span>
                                        </div>
                                        <div class="guidance-point">
                                            <i class="fas fa-trophy text-primary me-2"></i>
                                            <span>Ajoutez vos distinctions et réalisations académiques</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Guidance Modal Trigger -->
                                    <button type="button" class="btn btn-outline-primary guidance-btn" data-bs-toggle="modal" data-bs-target="#educationGuidanceModal">
                                        <i class="fas fa-info-circle me-2"></i>Exemple complet
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation Buttons -->
                        <div class="form-navigation">
                            <div class="row justify-content-between g-3">
                                <div class="col-auto">
                                    <a href="#intitulez_Votre_fiche" class="btn btn-outline-primary prev-btn">
                                        <i class="fas fa-arrow-left me-2"></i> Précédent
                                    </a>
                                </div>
                                <div class="col-auto">
                                    <a href="#pedagogie" class="btn btn-primary next-btn">
                                        Suivant <i class="fas fa-arrow-right ms-2"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Teaching Methodology Section -->
                <section class="profile-section" id="pedagogie">
                    <div class="container">
                        <div class="section-header text-center">
                            <h6 class="section-subtitle text-primary">Votre approche pédagogique</h6>
                            <h1 class="section-title">Décrivez votre méthodologie</h1>
                        </div>
                        
                        <div class="form-card">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="pedagogie_id" class="form-label">Votre pédagogie*</label>
                                    <textarea class="form-control auto-resize" id="pedagogie_id" rows="4" name="pedagogie">{{pedagogie}}</textarea>
                                </div>
                                
                                <div class="col-12 form-guidance">
                                    <div class="guidance-points">
                                        <div class="guidance-point">
                                            <i class="fas fa-chalkboard-teacher text-primary me-2"></i>
                                            <span>Décrivez votre approche pédagogique et le déroulement type d'un cours</span>
                                        </div>
                                        <div class="guidance-point">
                                            <i class="fas fa-tasks text-primary me-2"></i>
                                            <span>Expliquez comment vous préparez vos séances et supports</span>
                                        </div>
                                        <div class="guidance-point">
                                            <i class="fas fa-chart-line text-primary me-2"></i>
                                            <span>Précisez comment vous évaluez et faites progresser vos élèves</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Guidance Modal Trigger -->
                                    <button type="button" class="btn btn-outline-primary guidance-btn" data-bs-toggle="modal" data-bs-target="#methodologyGuidanceModal">
                                        <i class="fas fa-info-circle me-2"></i>Exemple complet
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Navigation Buttons -->
                        <div class="form-navigation">
                            <div class="row justify-content-between g-3">
                                <div class="col-auto">
                                    <a href="#parcours" class="btn btn-outline-primary prev-btn">
                                        <i class="fas fa-arrow-left me-2"></i> Précédent
                                    </a>
                                </div>
                                <div class="col-auto">
                                    <a href="#Video" class="btn btn-primary next-btn">
                                        Suivant <i class="fas fa-arrow-right ms-2"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Presentation Video Section -->
                <section class="profile-section" id="Video">
                    <div class="container">
                        <div class="section-header text-center">
                            <h6 class="section-subtitle text-primary">Votre présentation vidéo</h6>
                            <h1 class="section-title">Ajoutez une vidéo de présentation</h1>
                        </div>
                        
                        <div class="form-card">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="video_id" class="form-label">Lien YouTube de votre vidéo</label>
                                    <input type="text" class="form-control" id="video_id" 
                                        placeholder="https://www.youtube.com/embed/votre-video" 
                                        name="video_youtube_url" value="{{video}}">
                                </div>
                                
                                <div class="col-12 video-preview">
                                    <div class="ratio ratio-16x9">
                                        <iframe src="https://www.youtube.com/embed/Axkpyigw6eA" 
                                            title="Exemple de vidéo de présentation" 
                                            allowfullscreen></iframe>
                                    </div>
                                </div>
                                
                                <div class="col-12 form-guidance">
                                    <p class="guidance-text">
                                        Une vidéo de présentation permet aux parents de mieux vous connaître et augmente 
                                        considérablement votre crédibilité. Présentez-vous brièvement et expliquez 
                                        votre approche pédagogique.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Form Submission Buttons -->
                        <div class="form-submission">
                            <div class="row justify-content-between g-3">
                                <div class="col-auto">
                                    <a href="#pedagogie" class="btn btn-outline-primary prev-btn">
                                        <i class="fas fa-arrow-left me-2"></i> Précédent
                                    </a>
                                </div>
                                <div class="col-auto ms-auto">
                                    <div class="d-flex flex-wrap gap-3">
                                        <a href="{% url 'profil_prof' id_user=user.id %}" class="btn btn-outline-primary">
                                            Voir mon profil
                                        </a>
                                        <a href="{% url 'nouveau_fichier' %}" class="btn btn-primary">
                                            Étape suivante <i class="fas fa-arrow-right ms-2"></i>
                                        </a>
                                        <button type="submit" class="btn btn-warning" name="btn_enr">
                                            <i class="fas fa-save me-2"></i> Enregistrer
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </form>
        </div>
    </div>
</div>

<!-- Guidance Modals -->
<!-- Title Guidance Modal -->
<div class="modal fade" id="titleGuidanceModal" tabindex="-1" aria-labelledby="titleGuidanceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="titleGuidanceModalLabel">Conseils pour votre titre</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="example-title mb-4 p-3 bg-light rounded">
                    <h6 class="text-primary">Exemple de titre efficace :</h6>
                    <p class="mb-0">"Professeur expérimenté de mathématiques et physique à Lyon | Cours particuliers et en groupe | 10 ans d'expérience | Diplômé de l'École Normale Supérieure"</p>
                </div>
                
                <h6 class="mt-4">Éléments à inclure :</h6>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <strong>Matières enseignées</strong> - Précisez vos spécialités
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <strong>Localisation</strong> - Ville ou arrondissement
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <strong>Type de cours</strong> - Particuliers, en groupe, en ligne
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <strong>Expérience</strong> - Années d'expérience ou contexte
                    </li>
                    <li class="list-group-item">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        <strong>Diplômes</strong> - Vos qualifications principales
                    </li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">J'ai compris</button>
            </div>
        </div>
    </div>
</div>

<!-- Education Guidance Modal -->
<div class="modal fade" id="educationGuidanceModal" tabindex="-1" aria-labelledby="educationGuidanceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="educationGuidanceModalLabel">Exemple de parcours académique</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="example-content p-3 bg-light rounded">
                    <p><strong>Diplômes :</strong> Titulaire d'un Master en Mathématiques Appliquées de l'Université Paris-Dauphine, avec spécialisation en analyse numérique. J'ai également obtenu une licence de Physique à l'Université Pierre et Marie Curie.</p>
                    
                    <p><strong>Parcours académique :</strong> Mon cursus m'a permis de développer une solide expertise dans les matières scientifiques, avec une approche à la fois théorique et pratique. J'ai suivi des cours avancés en algèbre, analyse et probabilités, ainsi que des modules spécialisés en pédagogie.</p>
                    
                    <p><strong>Distinctions :</strong> Lauréat du prix d'excellence académique de mon université en 2018. J'ai également été classé dans le top 5% de ma promotion durant mes trois années de master.</p>
                    
                    <p><strong>Expérience d'enseignement :</strong> Durant mes études, j'ai donné des cours de soutien à des élèves de lycée, ce qui a confirmé ma passion pour l'enseignement. Depuis l'obtention de mon diplôme, je me consacre entièrement à l'enseignement des mathématiques et de la physique.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">J'ai compris</button>
            </div>
        </div>
    </div>
</div>

<!-- Methodology Guidance Modal -->
<div class="modal fade" id="methodologyGuidanceModal" tabindex="-1" aria-labelledby="methodologyGuidanceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="methodologyGuidanceModalLabel">Exemple de méthodologie pédagogique</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="example-content p-3 bg-light rounded">
                    <p><strong>Approche pédagogique :</strong> Je base mes cours sur une interaction constante avec l'élève, en adaptant mon enseignement à son style d'apprentissage. Chaque concept est expliqué à travers des exemples concrets avant d'aborder la théorie.</p>
                    
                    <p><strong>Déroulement d'une séance type :</strong> Nous commençons par un rappel des notions précédentes, puis j'introduis progressivement les nouveaux concepts. Des exercices d'application permettent de vérifier la compréhension. Je termine toujours par un résumé des points clés et des objectifs pour la prochaine séance.</p>
                    
                    <p><strong>Préparation des cours :</strong> Je prépare chaque séance en fonction des besoins spécifiques de l'élève, en sélectionnant des exercices adaptés à son niveau. J'utilise des supports variés (fiches, vidéos, applications) pour rendre l'apprentissage plus dynamique.</p>
                    
                    <p><strong>Suivi et progression :</strong> J'évalue régulièrement les progrès à travers des tests formatifs et je fournis des retours détaillés. J'encourage l'autonomie en guidant l'élève vers des méthodes de travail efficaces. Un bilan complet est réalisé chaque trimestre pour ajuster si nécessaire.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">J'ai compris</button>
            </div>
        </div>
    </div>
</div>

<!-- Back to Top Button -->
<a href="#" class="btn btn-primary btn-back-to-top">
    <i class="fas fa-arrow-up"></i>
</a>

{% endblock %}

{% block javascript %}
    <script>
        // Fonction pour redimensionner les Textarea selon leur contenu
        function adjustTextareaHeight() {
            const textareas = document.querySelectorAll('.auto-resize');

            textareas.forEach(textarea => {
                textarea.style.height = 'auto';
                textarea.style.height = (textarea.scrollHeight) + 'px';
            });
        }

        window.onload = adjustTextareaHeight;
        document.addEventListener('input', adjustTextareaHeight);
    </script>

    <style>
    /* Teacher Profile Creation Styles */
.teacher-profile-creation {
    background-color: #f8f9fa;
    min-height: 100vh;
}

.sidebar-col {
    background-color: #ffffff;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    z-index: 100;
}

.main-content-col {
    padding: 2rem;
}

/* Form Sections */
.profile-section {
    margin-bottom: 3rem;
    padding: 2rem 0;
}

.section-header {
    margin-bottom: 2rem;
}

.section-subtitle {
    font-size: 1.1rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.5rem;
}

.section-title {
    font-size: 2rem;
    font-weight: 700;
    color: #212529;
    margin-bottom: 1.5rem;
}

/* Form Cards */
.form-card {
    background-color: #ffffff;
    border-radius: 0.5rem;
    padding: 2rem;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05);
    margin-bottom: 2rem;
}

.form-label {
    font-weight: 600;
    margin-bottom: 0.75rem;
    color: #495057;
}

.form-control {
    border-radius: 0.375rem;
    padding: 0.75rem 1rem;
    border: 1px solid #ced4da;
    transition: all 0.2s ease;
}

.form-control:focus {
    border-color: #86b7fe;
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

textarea.form-control {
    min-height: 120px;
    resize: none;
}

/* Guidance Elements */
.form-guidance {
    margin-top: 1.5rem;
}

.guidance-text {
    color: #6c757d;
    line-height: 1.6;
}

.guidance-points {
    margin-bottom: 1.5rem;
}

.guidance-point {
    display: flex;
    align-items: flex-start;
    margin-bottom: 0.75rem;
}

.guidance-btn {
    display: inline-flex;
    align-items: center;
}

/* Video Preview */
.video-preview {
    margin: 1.5rem 0;
}

.video-preview iframe {
    border-radius: 0.5rem;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
}

/* Navigation Buttons */
.form-navigation {
    margin-top: 1.5rem;
}

.prev-btn, .next-btn {
    min-width: 120px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Form Submission */
.form-submission {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid #e9ecef;
}

/* Modals */
.modal-content {
    border-radius: 0.5rem;
}

.example-title, .example-content {
    border-left: 4px solid #0d6efd;
}

/* Back to Top Button */
.btn-back-to-top {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 99;
}

.btn-back-to-top.visible {
    opacity: 1;
    visibility: visible;
}

/* Responsive Adjustments */
@media (max-width: 992px) {
    .sidebar-col {
        order: 2;
    }
    
    .main-content-col {
        padding: 1.5rem;
    }
    
    .section-title {
        font-size: 1.75rem;
    }
}

@media (max-width: 768px) {
    .form-card {
        padding: 1.5rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .form-submission .d-flex {
        flex-direction: column;
        gap: 0.75rem;
    }
    
    .form-submission .btn {
        width: 100%;
    }
}
    </style>

{% endblock %}